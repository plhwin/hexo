title: "[Java]虚拟机基本结构"
date: 2015-08-01 03:37:06
tags: [Java]
categories: [Java]
---
* java堆用于存放对象示例，与数据相关，java栈主要与线程的函数调用相关
* 函数调用一次出入java栈一次，调用的时候入栈，调用结束（return或者throw）出栈，函数参数和函数局部  变量保存在栈帧中，所以函数调用结束之后栈帧被弹出，相应的局部变量也就失效了。
<!--more-->
* 函数参数和局部变量越多，需要栈帧中保存的局部变量表就越大，函数调用的层次就会越少。
* 局部变量是垃圾回收的很重要的根节点，任何被局部变量直接或者间接引用的对象都不会被回收。
* 对已非逃逸对象，虚拟机可以进行内存分配优化，将这些对象分配在栈上。
* 栈上分配依赖逃逸分析和变量替换的实现。
* 方法区所有线程共享，用于保存类，类的方法，类的变量等，在JDK1.6和JDK1.7中，方法区就是永久区，在JDK1.8中，永久区已经被彻底移除，取而代之的是元数据区。
